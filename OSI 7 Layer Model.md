# OSI 7 Layer Model

![OSI 7 layers](http://wiki.hash.kr/images/7/71/OSI_7_%EA%B3%84%EC%B8%B5.jpg)

국제 표준화 기구 ISO(International Standard Interconnection)는 **OSI(Open System Interconnection) 7계층 모델**로 네트워크에 속하는 시스템이 갖춰야할 기능을 계층 구조로 정의한다. 송수신 호스트는 각자 물리 계층부터 응용 계층에 이르는 기능을 갖춘다. 각 계층은 정해진 기능을 지원하기 위해 각기 다른 프로토콜을 제공한다.



## 계층 구조의 동작

데이터는 송신 호스트의 응용 계층에서 물리 계층까지 전달된 후, 수신 호스트의 물리 계층으로 전달되어 최종적으로 응용 계층으로 전달된다. 이때 각 계층의 프로토콜은 정해진 기능을 수행하기 위해 특정 정보들을 필요로 한다. 그래서 송신 호스트의 상위 계층에서 하위 계층으로 전달될 때마다 각 계층의 프로토콜에서 정의하는 헤더 정보가 패킷에 추가되며, 수신 호스트의 하위 계층에서 상위 계층으로 전달될 때마다 이 헤더가 제거된다. 제거된 헤더는 해석되어 데이터 송수신 과정에서 발생한 문제점을 해결하는 등 프로토콜을 수행할 때 사용한다.

한편 계층마다 다루는 데이터의 단위를 **PDU(Protocol Data Unit)**이라고 한다. PDU는 해당 계층의 프로토콜이 정의하는 헤더 정보와 상위 계층에서 넘겨받은 PDU인 페이로드로 이루어진다. 



## 계층별 기능

![layers](https://user-images.githubusercontent.com/57662010/195673487-6d2c7cf5-1666-4045-96c2-8504c60445d3.png)

### 알아야할 것

#### 데이터 전송 오류와 오류 제어

데이터 전송 오류에는 데이터 분실 오류와 데이터 변형 오류가 있다.

- 데이터 분실 오류: 데이터가 분실되는 오류
- 데이터 변형 오류: 변형된 데이터가 도착하는 오류

오류 제어는 발생한 데이터 전송 오류를 해결하는 기능이다.

#### 데이터 분실 오류와 흐름 제어

수신 프로세스의 데이터 수신 속도가 송신 프로세스의 데이터 송신 속도(버퍼의 처리 속도)보다 느린 경우 데이터 분실이 일어날 수 있다. 데이터 분실이 일어나면 수신 프로세스는 응답을 하지 않고, 송신 프로세스가 타임아웃 기능을 수행하면 네트워크 전송 효율이 떨어진다. 

흐름 제어(Flow Control)는 수신 호스트가 감당할 수 있을 정도로 송신 호스트의 전송 속도를 조절하는 기능이다.

#### 혼잡과 혼잡 제어

혼잡(Congestion)은 네트워크에 패킷 수가 과도하게 증가하여 네트워크 전체적으로 전송 속도가 급격하게 악화되는 현상이다.

혼잡 제어(Congestion Control)은 혼잡 현상을 예방하거나 제거하는 기능이다.



### 1 계층: 물리 계층

**물리 계층(Physical Layer)**은 데이터를 전기 신호로 바꾸어 전송한다.

데이터의 단위는 **비트(bit)**이다.

네트워크 어댑터, 케이블, 리피터, 허브 등이 있다.



### 2 계층: 데이터 링크 계층

**데이터 링크 계층(Data Link Layer)**은 물리적으로 연결된 두 노드 간에서 데이터를 전송한다(Point-to-Point). 이때 네트워크 계층으로 신뢰성 있는 데이터의 전달을 보장하기 위해 오류 제어 기능과 흐름 제어 기능을 제공한다.

오류 제어 방식으로 오류 검출과 재전송을 사용한다. 데이터 분실 오류는 송신 호스트의 타임아웃 기능으로 검출하며 데이터 변형 오류는 수신 호스트가 오류 검출 코드를 사용하여 검출한다.

LAN 환경에서 데이터 링크 계층은 LLC 계층과 MAC 계층으로 구분된다.

데이터의 단위는 **프레임(frame)**이다. 프레임의 헤더에는 송수신 호스트의 LAN 카드에 내장된 MAC 주소가 포함되어 있으며 이것은 호스트를 구분하는 물리적 주소로 사용된다.

브릿지, 스위치 등이 있다.



###  3 계층: 네트워크 계층

**네트워크 계층(Network Layer)**은 라우팅을 담당하고 혼잡 제어 기능을 제공한다. 전송 계층에서 온 데이터를 패킷으로 분할하거나, 패킷들을 병합하여 전송 계층으로 보낸다. IPv6 프로토콜은 흐름 제어 기능도 제공한다.

데이터의 단위는 **패킷(packet)**이다. 패킷의 헤더에는 MAC 주소를 변환한 IP 주소가 포함되어 있으며 이것은 호스트를 구분하는 논리적 주소로 사용된다. IP 주소는 경로를 결정하는 중요한 기준이 된다. 

라우터, L3 스위치 등이 있다.



### 4 계층: 전송 계층

**전송 계층(Transport Layer)**는 최종 사용자인 송신 프로세스와 수신 프로세스의 종단(End-to-End) 연결을 제공한다. 사용자들이 신뢰성 있는 데이터를 주고받을 수 있도록 오류 제어, 흐름 제어 기능도 제공한다.

TCP 프로토콜을 사용하는 경우 데이터의 단위는 **세그먼트(segment)**이며 UDP 프로토콜을 사용하는 경우 **데이터그램(datagram)**이다. 패킷의 헤더에는 포트 번호가 포함되어 있으며 이것은 프로세스를 구분하는 주소로 사용된다.



### 5 계층: 세션 계층

**세션 계층(Session Layer)**은 세션 기능을 제공하여 송수신 호스트 간의 대화를 제어한다. 토큰 제어와 일시적인 전송 장애를 해결하기 위해 두 호스트를 동기 기능 등을 제공한다. 



### 6 계층: 표현 계층

**표현 계층(Presentaion Layer)**은 데이터의 의미(Semantic)과 표현 방법(Syntax)을 처리한다. 두 호스트에서 서로를 이해할 수 있는 표준 방식으로 데이터를 변환한다. 인코딩/디코딩을 수행하며 보안을 위해 데이터를 암호화하거나 대용량 데이터를 압축한다.



### 7 계층: 응용 계층

**응용 계층(Application Layer)**은 최종 사용자가 접근하는 유일한 계층으로, 일반적인 응용 프로세스가 속한다. 대표적인 프로토콜로 HTTP(Hyper Text Transfer Protocol), FTP(File Transfer Protocl) 등이 있다.



## 스터디

### OSI 7 계층 모델에 대해서 말해보세요

OSI 7 계층 모델은 네트워크에 속하는 시스템이 갖추어야할 기능을 계층적으로 정의한 것이다.

물리 계층은 데이터를 전기 신호로 변환하여 전송한다. 데이터의 단위는 비트이다.

데이터 링크 계층은 물리적으로 연결된 두 노드 간에서 데이터를 전송한다. 오류 제어와 흐름 제어 기능을 제공한다. 데이터의 단위는 프레임이다. 프레임에 호스트를 구분하는 물리적 주소인 MAC 주소를 포함한다.

네트워크 계층은 라우팅을 담당하고 혼잡 제어 기능을 제공한다. 데이터의 단위는 패킷이다. 패킷에 호스트를 구분하는 물리적 주소인 IP 주소를 포함한다.

전송 계층은 송수신 프로세스를 종단 연결하고 오류 제어, 흐름 제어 기능을 제공한다. TCP 프로토콜을 사용하는 경우 데이터의 단위는 세그먼트이며 UDP 프로토콜을 사용하는 경우 데이터그램이다. 패킷에 프로세스를 구분하는 주소인 포트 번호를 포함한다.

세션 계층은 송수신 프로세스가 통신할 수 있도록 세션 기능을 제공한다.

표현 계층은 두 호스트가 서로를 이해할 수 있는 표준으로 데이터를 변환한다. 데이터를 암호화하거나 압축한다.

응용 계층은 응용 프로세스가 돌아간다.
